# 🚀 快速启动指南

## 当前状态：✅ 所有问题已修复！

---

## 📋 问题修复总结

### ✅ 问题1：主页面位置混乱
**已解决**：`index.html` 现在统一在 `public/` 文件夹中

### ✅ 问题2：页面布局混乱
**已解决**：使用Tailwind CSS重新设计，现代化卡片布局

### ✅ 问题3：无需登录即可访问
**已解决**：添加登录前置验证，未登录自动跳转登录页

---

## 🎯 立即启动

### 1. 确保数据库已初始化

```bash
# 如果还没初始化，运行：
npm run init-db
```

### 2. 启动服务器

```bash
npm start
```

你应该看到：
```
╔═══════════════════════════════════════════════════════════════╗
║                                                               ║
║   🎬 YouTube 视频搜索 + 会员系统                               ║
║                                                               ║
║   🚀 Server running on: http://localhost:9015                ║
║   📊 Database: PostgreSQL                                     ║
║   💰 每次获取数据计费: 5元                                      ║
║   👤 会员数据隔离已启用                                         ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

### 3. 访问应用

打开浏览器访问：
```
http://localhost:9015
```

**首次访问会自动跳转到登录页面** 👇

```
http://localhost:9015/login.html
```

---

## 👤 登录/注册

### 方式1：使用管理员账号登录

```
📧 邮箱: admin@youtube.com
🔑 密码: Admin@123456
```

**⚠️ 登录后请立即修改密码！**

### 方式2：注册新账号

1. 点击"立即注册"
2. 填写邮箱、密码、用户名
3. 注册成功后自动登录
4. 前往个人中心充值

---

## 💰 充值流程

### 1. 进入个人中心

登录后点击右上角"👤 个人中心"

### 2. 选择充值套餐

| 套餐 | 金额 | 赠送 | 实得 | 可用次数 |
|------|------|------|------|----------|
| 体验套餐 | ¥10 | ¥0 | ¥10 | 2次 |
| 基础套餐 | ¥50 | ¥5 | ¥55 | 11次 |
| 标准套餐 | ¥100 | ¥15 | ¥115 | 23次 |

### 3. 完成支付

选择支付方式并完成支付

### 4. 返回主页

充值成功后，余额会立即更新

---

## 🔍 使用YouTube搜索功能

### 方式1：关键词搜索（5元/次）

1. 在主页输入关键词，如："Python教程"
2. 点击"🚀 获取数据并入库 (5元)"
3. 确认扣费提示
4. 等待搜索完成
5. 查看获取的视频数据

### 方式2：按频道获取（5元/次）

1. 点击"选择频道并获取 (5元)"
2. 输入频道ID或用户名
   - 用户名格式：`@username`
   - 频道ID格式：`UCxxxxxxxxxx`
3. 确认扣费提示
4. 等待获取完成

---

## 📊 查看和管理数据

### 筛选视频

- **搜索关键词**：在标题或描述中搜索
- **频道筛选**：按频道名称筛选
- **日期范围**：设置起始和结束日期
- **排序方式**：按发布日期、观看数、点赞数等排序

### 导出数据

点击"📥 导出 Excel"按钮，下载包含所有筛选结果的Excel文件

### 查看视频

- 点击"观看"：在YouTube中打开视频
- 点击"描述"：在弹窗中查看完整描述

---

## 👨‍💼 管理员功能

### 登录为管理员后

你会看到：
- ✅ "管理员"标识
- ✅ "会员筛选"下拉框
- ✅ "管理后台"按钮

### 查看所有用户数据

默认情况下，管理员可以看到所有用户的视频数据

### 筛选特定用户

1. 在"会员筛选"下拉框中选择用户
2. 视频列表自动刷新，只显示该用户的数据
3. 可以导出该用户的数据

### 进入管理后台

点击"⚙️ 管理后台"查看：
- 用户列表和余额
- 交易记录
- 手动充值功能

---

## 🎯 完整使用流程示例

### 普通用户流程

```
1. 访问 http://localhost:9015
   ↓
2. 跳转到登录页面
   ↓
3. 注册新账号：user@example.com
   ↓
4. 登录成功，进入主页
   ↓
5. 查看余额：¥0.00
   ↓
6. 点击"个人中心"
   ↓
7. 选择"标准套餐"充值¥100
   ↓
8. 完成支付，获得¥115余额
   ↓
9. 返回主页，可用次数：23次
   ↓
10. 输入关键词"Python教程"
    ↓
11. 点击"获取数据并入库"
    ↓
12. 确认扣费5元
    ↓
13. 获取50个视频数据
    ↓
14. 余额更新为¥110，可用次数：22次
    ↓
15. 筛选、排序、导出数据
```

### 管理员流程

```
1. 登录管理员账号：admin@youtube.com
   ↓
2. 看到所有用户的视频数据
   ↓
3. 在"会员筛选"中选择"user@example.com"
   ↓
4. 只显示该用户的50个视频
   ↓
5. 导出该用户的数据
   ↓
6. 点击"管理后台"
   ↓
7. 查看用户列表：user@example.com, ¥110
   ↓
8. 查看交易记录：搜索扣费 -¥5
   ↓
9. 手动为用户充值（如有需要）
```

---

## 📱 页面导航

| 页面 | URL | 说明 |
|------|-----|------|
| 主页 | `/` | YouTube搜索和数据展示 |
| 登录 | `/login.html` | 用户登录 |
| 注册 | `/register.html` | 新用户注册 |
| 个人中心 | `/profile.html` | 余额、充值、修改资料 |
| 管理后台 | `/admin.html` | 管理员专用（用户和交易管理）|
| 忘记密码 | `/forgot-password.html` | 密码找回 |

---

## ⚡ 快捷键和技巧

### 快速充值
```
主页右上角 → 余额数字 → 点击跳转个人中心
```

### 快速筛选
```
输入关键词 → 选择频道 → 点击"应用筛选"
```

### 快速重置
```
点击"重置"按钮 → 清空所有筛选条件
```

### 查看完整描述
```
视频卡片 → 点击"描述"按钮 → 查看并可复制
```

---

## 🐛 常见问题

### Q1: 登录后立即跳转回登录页？
**A**: 检查浏览器控制台是否有错误，确保JWT_SECRET配置正确

### Q2: 搜索后没有数据？
**A**: 检查YouTube API Key是否有效，查看服务器日志

### Q3: 余额显示为NaN？
**A**: 刷新页面，如果问题持续，检查数据库users表中的balance字段

### Q4: 管理员看不到筛选框？
**A**: 检查数据库中is_admin字段是否为true

### Q5: 视频图片无法显示？
**A**: YouTube缩略图可能需要翻墙访问

---

## 📊 系统要求

### 最低配置
- Node.js 14+
- PostgreSQL 12+
- 2GB RAM
- 现代浏览器（Chrome, Firefox, Safari, Edge）

### 推荐配置
- Node.js 18+
- PostgreSQL 14+
- 4GB RAM
- Chrome最新版

---

## 🔒 安全提示

1. ✅ 首次登录后立即修改管理员密码
2. ✅ 定期备份数据库
3. ✅ 不要在生产环境使用默认密码
4. ✅ 配置防火墙限制数据库访问
5. ✅ 使用HTTPS（生产环境）

---

## 📞 获取帮助

### 查看文档
- `README_YOUTUBE_MEMBER.md` - 完整项目文档
- `INTEGRATION_GUIDE.md` - 整合指南
- `UPDATE_NOTES.md` - 更新说明
- `PROJECT_FILES_LIST.md` - 文件清单

### 检查日志
```bash
# 查看服务器日志
tail -f server.log

# 查看浏览器控制台
F12 → Console
```

### 常用命令
```bash
# 重启服务器
npm start

# 开发模式（自动重启）
npm run dev

# 重新初始化数据库
npm run init-db
```

---

## ✅ 验收清单

- [ ] 能够启动服务器
- [ ] 访问主页自动跳转登录
- [ ] 能够注册新账号
- [ ] 能够登录系统
- [ ] 登录后显示用户信息
- [ ] 能够充值余额
- [ ] 能够搜索YouTube视频（扣费5元）
- [ ] 能够查看视频列表
- [ ] 能够筛选和排序
- [ ] 能够导出Excel
- [ ] 管理员能看到筛选框
- [ ] 管理员能筛选用户数据
- [ ] 能够退出登录

---

**🎉 恭喜！系统已准备就绪，开始使用吧！**

如有问题，请查看 `UPDATE_NOTES.md` 或提交Issue。
