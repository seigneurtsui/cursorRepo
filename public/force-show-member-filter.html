<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼ºåˆ¶æ˜¾ç¤ºä¼šå‘˜ç­›é€‰ - è¯Šæ–­å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px 5px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
        }
        .btn:hover {
            background: #45a049;
        }
        .btn-danger {
            background: #f44336;
        }
        .btn-danger:hover {
            background: #da190b;
        }
        .btn-primary {
            background: #2196F3;
        }
        .btn-primary:hover {
            background: #0b7dda;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e9;
            border-left: 4px solid #4CAF50;
            border-radius: 4px;
        }
        .error {
            background: #ffebee;
            border-left-color: #f44336;
        }
        .code {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            margin: 10px 0;
            white-space: pre-wrap;
        }
        .step {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-left: 4px solid #2196F3;
            border-radius: 4px;
        }
        .step h3 {
            margin-top: 0;
            color: #2196F3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ä¼šå‘˜ç­›é€‰æ§ä»¶è¯Šæ–­å·¥å…·</h1>
        
        <div class="step">
            <h3>æ­¥éª¤ 1: æ‰“å¼€ä¸»é¡µé¢</h3>
            <p>é¦–å…ˆæ‰“å¼€ä¸»é¡µé¢å¹¶ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•</p>
            <a href="/" class="btn btn-primary" target="_blank">æ‰“å¼€ä¸»é¡µé¢</a>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 2: åœ¨ä¸»é¡µé¢æ§åˆ¶å°è¿è¡Œè¯Šæ–­</h3>
            <p>åœ¨ä¸»é¡µé¢æŒ‰ F12 æ‰“å¼€æ§åˆ¶å°ï¼Œå¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹ä»£ç ï¼š</p>
            <div class="code">// ========== ä¼šå‘˜ç­›é€‰æ§ä»¶è¯Šæ–­è„šæœ¬ ==========

console.log('ğŸ” å¼€å§‹è¯Šæ–­ä¼šå‘˜ç­›é€‰æ§ä»¶...\n');

// 1. æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
const element = document.getElementById('adminMemberFilter');
console.log('1ï¸âƒ£ å…ƒç´ æ˜¯å¦å­˜åœ¨:', element ? 'âœ… æ˜¯' : 'âŒ å¦');
if (element) {
    console.log('   å…ƒç´ å¯¹è±¡:', element);
} else {
    console.error('   âŒ æ‰¾ä¸åˆ° adminMemberFilter å…ƒç´ ï¼');
}

// 2. æ£€æŸ¥å½“å‰æ˜¾ç¤ºçŠ¶æ€
if (element) {
    const displayStyle = window.getComputedStyle(element).display;
    const inlineStyle = element.style.display;
    console.log('2ï¸âƒ£ æ˜¾ç¤ºçŠ¶æ€:');
    console.log('   - inline style:', inlineStyle || '(æœªè®¾ç½®)');
    console.log('   - computed style:', displayStyle);
    console.log('   - æ˜¯å¦å¯è§:', displayStyle !== 'none' ? 'âœ… æ˜¯' : 'âŒ å¦');
}

// 3. æ£€æŸ¥ç”¨æˆ·ä¿¡æ¯
console.log('3ï¸âƒ£ å½“å‰ç”¨æˆ·:');
if (typeof currentUser !== 'undefined') {
    console.log('   - é‚®ç®±:', currentUser.email);
    console.log('   - æ˜¯å¦ç®¡ç†å‘˜:', currentUser.isAdmin ? 'âœ… æ˜¯' : 'âŒ å¦');
} else {
    console.error('   âŒ currentUser æœªå®šä¹‰');
}

// 4. æ£€æŸ¥çˆ¶å®¹å™¨
if (element) {
    const parent = element.parentElement;
    console.log('4ï¸âƒ£ çˆ¶å®¹å™¨:');
    console.log('   - ç±»å:', parent.className);
    console.log('   - çˆ¶å®¹å™¨display:', window.getComputedStyle(parent).display);
}

// 5. æ£€æŸ¥æ‰€æœ‰ç­›é€‰æ§ä»¶
console.log('5ï¸âƒ£ æ‰€æœ‰ç­›é€‰æ§ä»¶çŠ¶æ€:');
const filters = {
    'normalChannelFilter': 'æ™®é€šé¢‘é“ç­›é€‰',
    'adminChannelFilter': 'ç®¡ç†å‘˜é¢‘é“ç­›é€‰',
    'adminMemberFilter': 'ç®¡ç†å‘˜ä¼šå‘˜ç­›é€‰'
};
for (const [id, name] of Object.entries(filters)) {
    const el = document.getElementById(id);
    if (el) {
        const display = window.getComputedStyle(el).display;
        console.log(`   ${name} (${id}):`, display === 'none' ? 'âŒ éšè—' : 'âœ… æ˜¾ç¤º');
    } else {
        console.log(`   ${name} (${id}): âŒ ä¸å­˜åœ¨`);
    }
}

// 6. å¼ºåˆ¶æ˜¾ç¤ºä¼šå‘˜ç­›é€‰
console.log('\n6ï¸âƒ£ å°è¯•å¼ºåˆ¶æ˜¾ç¤ºä¼šå‘˜ç­›é€‰...');
if (element) {
    element.style.display = 'block';
    element.style.visibility = 'visible';
    element.style.opacity = '1';
    
    // æ»šåŠ¨åˆ°å…ƒç´ ä½ç½®
    element.scrollIntoView({ behavior: 'smooth', block: 'center' });
    
    // æ·»åŠ é«˜äº®æ•ˆæœ
    element.style.border = '3px solid red';
    element.style.backgroundColor = '#fff3cd';
    
    setTimeout(() => {
        element.style.border = '';
        element.style.backgroundColor = '';
    }, 3000);
    
    console.log('   âœ… å·²è®¾ç½®ä¸ºæ˜¾ç¤ºå¹¶é«˜äº®ï¼ˆçº¢è‰²è¾¹æ¡†3ç§’ï¼‰');
    console.log('   ğŸ“ å·²æ»šåŠ¨åˆ°å…ƒç´ ä½ç½®');
} else {
    console.error('   âŒ æ— æ³•æ˜¾ç¤ºï¼šå…ƒç´ ä¸å­˜åœ¨');
}

console.log('\nâœ… è¯Šæ–­å®Œæˆï¼');
console.log('ğŸ“ å¦‚æœçœ‹åˆ°çº¢è‰²è¾¹æ¡†ï¼Œè¯´æ˜å…ƒç´ å­˜åœ¨ä½†ä¹‹å‰è¢«éšè—äº†');
console.log('ğŸ“ å¦‚æœçœ‹ä¸åˆ°çº¢è‰²è¾¹æ¡†ï¼Œè¯´æ˜å…ƒç´ çœŸçš„ä¸å­˜åœ¨');
</div>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 3: æŸ¥çœ‹è¯Šæ–­ç»“æœ</h3>
            <p>æ§åˆ¶å°ä¼šæ˜¾ç¤ºè¯¦ç»†çš„è¯Šæ–­ä¿¡æ¯ï¼Œå‘Šè¯‰ä½ ï¼š</p>
            <ul>
                <li>âœ… å…ƒç´ æ˜¯å¦å­˜åœ¨</li>
                <li>âœ… å½“å‰æ˜¾ç¤ºçŠ¶æ€</li>
                <li>âœ… æ˜¯å¦æ˜¯ç®¡ç†å‘˜</li>
                <li>âœ… æ‰€æœ‰ç­›é€‰æ§ä»¶çš„çŠ¶æ€</li>
            </ul>
            <p><strong>å¦‚æœå…ƒç´ å­˜åœ¨</strong>ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ï¼š</p>
            <ul>
                <li>ğŸ”µ å¼ºåˆ¶æ˜¾ç¤ºå…ƒç´ </li>
                <li>ğŸ”µ æ·»åŠ çº¢è‰²è¾¹æ¡†é«˜äº®ï¼ˆ3ç§’ï¼‰</li>
                <li>ğŸ”µ æ»šåŠ¨åˆ°å…ƒç´ ä½ç½®</li>
            </ul>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 4: æä¾›è¯Šæ–­ç»“æœ</h3>
            <p>è¯·æˆªå›¾å¹¶æä¾›æ§åˆ¶å°çš„å®Œæ•´è¾“å‡ºï¼Œç‰¹åˆ«æ˜¯ï¼š</p>
            <ul>
                <li>ğŸ“‹ "1ï¸âƒ£ å…ƒç´ æ˜¯å¦å­˜åœ¨" çš„ç»“æœ</li>
                <li>ğŸ“‹ "2ï¸âƒ£ æ˜¾ç¤ºçŠ¶æ€" çš„ç»“æœ</li>
                <li>ğŸ“‹ "3ï¸âƒ£ å½“å‰ç”¨æˆ·" çš„ç»“æœ</li>
                <li>ğŸ“‹ "5ï¸âƒ£ æ‰€æœ‰ç­›é€‰æ§ä»¶çŠ¶æ€" çš„ç»“æœ</li>
            </ul>
        </div>

        <div class="step">
            <h3>å¤‡é€‰æ–¹æ¡ˆï¼šä¸€é”®è¯Šæ–­é“¾æ¥</h3>
            <p>å¦‚æœä½ å·²ç»åœ¨ä¸»é¡µé¢ï¼Œç›´æ¥ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ‰§è¡Œè¯Šæ–­ï¼š</p>
            <button class="btn" onclick="runDiagnostics()">ğŸ” è¿è¡Œè¯Šæ–­è„šæœ¬</button>
            <p style="color: #999; font-size: 14px;">ï¼ˆä»…åœ¨ä¸»é¡µé¢æœ‰æ•ˆï¼‰</p>
        </div>

        <div class="step">
            <h3>å¿«æ·é“¾æ¥</h3>
            <a href="/public/clear.html" class="btn btn-danger" target="_blank">æ¸…é™¤ç¼“å­˜</a>
            <a href="/public/login.html" class="btn btn-primary" target="_blank">ç™»å½•é¡µé¢</a>
            <a href="/" class="btn" target="_blank">ä¸»é¡µé¢</a>
        </div>
    </div>

    <script>
        function runDiagnostics() {
            // å°è¯•åœ¨å½“å‰çª—å£è¿è¡Œï¼ˆå¦‚æœæ˜¯åœ¨ä¸»é¡µé¢ï¼‰
            try {
                if (typeof document.getElementById('adminMemberFilter') !== 'undefined') {
                    eval(document.querySelector('.code').textContent);
                } else {
                    alert('âŒ è¯·åœ¨ä¸»é¡µé¢è¿è¡Œæ­¤è¯Šæ–­è„šæœ¬ï¼\n\næ­¥éª¤ï¼š\n1. æ‰“å¼€ä¸»é¡µé¢\n2. æŒ‰ F12 æ‰“å¼€æ§åˆ¶å°\n3. å¤åˆ¶ç²˜è´´ä¸Šé¢çš„ä»£ç ');
                }
            } catch (e) {
                alert('âŒ è¯·åœ¨ä¸»é¡µé¢è¿è¡Œæ­¤è¯Šæ–­è„šæœ¬ï¼\n\næ­¥éª¤ï¼š\n1. æ‰“å¼€ä¸»é¡µé¢\n2. æŒ‰ F12 æ‰“å¼€æ§åˆ¶å°\n3. å¤åˆ¶ç²˜è´´ä¸Šé¢çš„ä»£ç ');
            }
        }
    </script>
</body>
</html>
